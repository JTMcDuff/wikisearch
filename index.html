<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikisearch</title>
    <script src="apiScripts.js"></script>
    <script src="domScripts.js"></script>
    <script src="sortingScripts.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>

  <body>
  	<header class="main-header">
  		<h1>Wikisearch</h1>
  		<h2>Charles Schwab Coding Challenge</h2>
  		<form class="search-form">
  			<div class="form-group">
	  			<label for="search-input" class="search-labels">Search Terms</label>
		  		<input type="text" id="search-input" name="Search Wikipedia" value="Search Me" class="search-inputs">
	  		</div>

	  		<div class="form-group">
		  		<label for="search-num-Items" class="search-labels">Max Results</label>
		  		<input type="text" id="search-num-items" name="Number of Results" value="5" class="search-inputs">
	  		</div>

  			<button type="button" name="Search Button" onclick="searchWiki()">
				Search
	  		</button>

	  		<button type="button" name="Clear Results" onclick="clearResults()">
	  			Clear
	  		</button>

  		</form>
  	</header>

  	<main id="main-search">
  		<section class="results-heading">
	  		<h2> Search Results</h2>

  			<button type="button" class="sort-button" name="Sort by Title" onclick="sortByTitle()">
	  			Sort by Title
	  		</button>

	  		<button type="button" class="sort-button" name="Sort by Word Count" onclick="sortByWordCount()">
	  			Sort by Word Count
	  		</button>
  		</section>
  		<div id="results-container" class="results"></div>
			
  		</div>

  	</main>


  </body>

  <script>
  	// Init list store for easier sorting later.
  	/**
  	* format: [
	*			[data,html object]
  	*		  ]
	*/
  	let = wikiResults = [];
  	// Counters for tracking sorting, allowing them to "toggle";
  	let alphaSort = true;
  	let wordCountSort = true;

  	/**
  	* @function handles searching and processing wikipedia
  	*/
  	function searchWiki() {
  		// TODO JOHNNY: Update to handle input validation
  		makeWikiAPICall(getSearchTerms()) 
  		.then(results =>{
  			wikiResults = formatResults(results);
  			renderResults(wikiResults);
  		}).catch(error => {
  			alert('Something went wrong ', error);
  		});
  	};

  </script>
</html>